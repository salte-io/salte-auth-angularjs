{"version":3,"sources":["webpack://salte-auth-angularjs/webpack/universalModuleDefinition","webpack://salte-auth-angularjs/external \"angular\"","webpack://salte-auth-angularjs/./routes/salte-auth-routes.module.js","webpack://salte-auth-angularjs/./routes/salte-auth-routes.service.js","webpack://salte-auth-angularjs/./salte-auth.service.js","webpack://salte-auth-angularjs/external {\"root\":\"salte.auth\",\"commonjs\":\"@salte-auth/salte-auth\",\"commonjs2\":\"@salte-auth/salte-auth\",\"amd\":\"@salte-auth/salte-auth\"}","webpack://salte-auth-angularjs/webpack/bootstrap","webpack://salte-auth-angularjs/webpack/runtime/compat get default export","webpack://salte-auth-angularjs/webpack/runtime/define property getters","webpack://salte-auth-angularjs/webpack/runtime/hasOwnProperty shorthand","webpack://salte-auth-angularjs/webpack/runtime/make namespace object","webpack://salte-auth-angularjs/./salte-auth.module.js"],"names":["module","angular","service","SalteAuthRoutesService","name","$injector","$location","routes","has","$state","get","states","i","length","state","secured","url","href","absolute","push","originalUrl","absUrl","$route","Object","keys","forEach","route","path","$inject","SalteAuthServiceProvider","config","SalteAuth","$rootScope","$q","promise","then","response","$digest","catch","error","eventType","callback","$listeners","index","indexOf","splice","$auth","loginWithRedirect","loginWithIframe","loginWithPopup","logoutWithRedirect","logoutWithIframe","logoutWithPopup","retrieveAccessToken","profile","window","salte","auth","$$listeners","event","storageArea","key","$config","concat","uirouter","ngroute","eventTypes","on","data","listeners","prototype","$get","RoutesModule","provider","SalteAuthService","run","addEventListener","$$onStorageChanged","$$registerRoutes","$$registerEvents"],"mappings":"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","file":"salte-auth-angularjs.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"angular\"), require(\"@salte-auth/salte-auth\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"salte-auth-angularjs\", [\"angular\", \"@salte-auth/salte-auth\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"salte-auth-angularjs\"] = factory(require(\"angular\"), require(\"@salte-auth/salte-auth\"));\n\telse\n\t\troot[\"salte-auth-angularjs\"] = factory(root[\"angular\"], root[\"salte.auth\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__5__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","import angular from 'angular';\n\nimport SalteAuthRoutesService from './salte-auth-routes.service.js';\n\nconst module = angular.module('salte.auth.routes', []);\n\nmodule.service('SalteAuthRoutesService', SalteAuthRoutesService);\n\nexport default module.name;\n","export default class SalteAuthRoutesService {\n  constructor($injector, $location) {\n    this.$injector = $injector;\n    this.$location = $location;\n  }\n\n  get uirouter() {\n    const routes = [];\n    if (this.$injector.has('$state')) {\n      const $state = this.$injector.get('$state');\n      const states = $state.get();\n\n      for (let i = 0; i < states.length; i++) {\n        const state = states[i];\n\n        if (!state.secured) continue;\n\n        const url = $state.href(state.name, {}, {absolute: true});\n        routes.push(url);\n      }\n    }\n    return routes;\n  }\n\n  get ngroute() {\n    const originalUrl = this.$location.absUrl();\n    const routes = [];\n    if (this.$injector.has('$route')) {\n      const $route = this.$injector.get('$route');\n\n      Object.keys($route.routes).forEach((url) => {\n        const route = $route.routes[url];\n\n        if (!route.secured) return;\n\n        this.$location.path(url);\n\n        routes.push(this.$location.absUrl());\n      });\n    }\n    this.$location.absUrl(originalUrl);\n    return routes;\n  }\n}\n\nSalteAuthRoutesService.$inject = ['$injector', '$location'];\n","import { SalteAuth } from '@salte-auth/salte-auth';\n\nexport default class SalteAuthServiceProvider {\n  setup(config) {\n    return new SalteAuth(config);\n  }\n\n  $get($rootScope, $q, SalteAuthRoutesService) {\n    return class SalteAuthService {\n      static digest(promise) {\n        return promise.then((response) => {\n          $rootScope.$digest();\n          return response;\n        }).catch((error) => {\n          $rootScope.$digest();\n          throw error;\n        });\n      }\n\n      static on(eventType, callback) {\n        if (!this.$listeners[eventType]) {\n          this.$listeners[eventType] = [];\n        }\n\n        this.$listeners[eventType].push(callback);\n      }\n\n      static off(eventType, callback) {\n        const index = this.$listeners[eventType].indexOf(callback);\n        this.$listeners[eventType].splice(index, 1);\n      }\n\n      static loginWithRedirect(...args) {\n        return this.$auth.loginWithRedirect(...args);\n      }\n\n      static loginWithIframe(...args) {\n        return this.$auth.loginWithIframe(...args);\n      }\n\n      static loginWithPopup(...args) {\n        return this.$auth.loginWithPopup(...args);\n      }\n\n      static logoutWithRedirect(...args) {\n        return this.$auth.logoutWithRedirect(...args);\n      }\n\n      static logoutWithIframe(...args) {\n        return this.$auth.logoutWithIframe(...args);\n      }\n\n      static logoutWithPopup(...args) {\n        return this.$auth.logoutWithPopup(...args);\n      }\n\n      static retrieveAccessToken() {\n        return this.$auth.retrieveAccessToken();\n      }\n\n      static get profile() {\n        return this.$auth.profile;\n      }\n\n      static get $auth() {\n        if (!window.salte || !window.salte.auth) {\n          return null;\n        }\n        return window.salte.auth;\n      }\n\n      static get $listeners() {\n        if (!this.$$listeners) {\n          this.$$listeners = {};\n        }\n        return this.$$listeners;\n      }\n\n      static $$onStorageChanged(event) {\n        if (event.storageArea.length && event.key.indexOf('salte.auth') === -1) return;\n\n        $rootScope.$digest();\n      }\n\n      static $$registerRoutes() {\n        if ([false, true].indexOf(this.$auth.$config.routes) !== -1) return;\n        this.$auth.$config.routes = this.$auth.$config.routes || [];\n        this.$auth.$config.routes = this.$auth.$config.routes.concat(SalteAuthRoutesService.uirouter);\n        this.$auth.$config.routes = this.$auth.$config.routes.concat(SalteAuthRoutesService.ngroute);\n      }\n\n      static $$registerEvents() {\n        const eventTypes = ['login', 'logout', 'refresh'];\n\n        for (let i = 0; i < eventTypes.length; i++) {\n          const eventType = eventTypes[i];\n          this.$auth.on(eventType, (error, data) => {\n            const listeners = this.$listeners[eventType];\n\n            if (listeners) {\n              for (let i = 0; i < listeners.length; i++) {\n                listeners[i](error, data);\n              }\n            }\n\n            $rootScope.$digest();\n          });\n        }\n      }\n    };\n  }\n}\n\nSalteAuthServiceProvider.prototype.$get.$inject = ['$rootScope', '$q', 'SalteAuthRoutesService'];\n","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import angular from 'angular';\n\nimport RoutesModule from './routes/salte-auth-routes.module.js';\nimport SalteAuthService from './salte-auth.service.js';\n\nconst module = angular.module('salte.auth', [\n  RoutesModule\n]);\n\nmodule.provider('SalteAuthService', SalteAuthService);\n\nmodule.run(['SalteAuthService', (SalteAuthService) => {\n  window.addEventListener('storage', SalteAuthService.$$onStorageChanged);\n  SalteAuthService.$$registerRoutes();\n  SalteAuthService.$$registerEvents();\n}]);\n\nexport default module.name;\n"],"sourceRoot":""}