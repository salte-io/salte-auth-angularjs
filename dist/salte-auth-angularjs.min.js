/*! For license information please see salte-auth-angularjs.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular"),require("@salte-auth/salte-auth")):"function"==typeof define&&define.amd?define("salte-auth-angularjs",["angular","@salte-auth/salte-auth"],e):"object"==typeof exports?exports["salte-auth-angularjs"]=e(require("angular"),require("@salte-auth/salte-auth")):t["salte-auth-angularjs"]=e(t.angular,t["salte.auth"])}(self,(function(t,e){return function(){"use strict";var n=[,function(e){e.exports=t},function(t,e,n){n.r(e);var r=n(1),u=n.n(r),o=n(3),i=u().module("salte.auth.routes",[]);i.service("SalteAuthRoutesService",o.default),e.default=i.name},function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,{default:function(){return u}});var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$injector=e,this.$location=n}var e,n;return e=t,(n=[{key:"uirouter",get:function(){var t=[];if(this.$injector.has("$state"))for(var e=this.$injector.get("$state"),n=e.get(),r=0;r<n.length;r++){var u=n[r];if(u.secured){var o=e.href(u.name,{},{absolute:!0});t.push(o)}}return t}},{key:"ngroute",get:function(){var t=this,e=this.$location.absUrl(),n=[];if(this.$injector.has("$route")){var r=this.$injector.get("$route");Object.keys(r.routes).forEach((function(e){r.routes[e].secured&&(t.$location.path(e),n.push(t.$location.absUrl()))}))}return this.$location.absUrl(e),n}}])&&r(e.prototype,n),t}();u.$inject=["$injector","$location"]},function(t,e,n){n.r(e),n.d(e,{default:function(){return a}});var r=n(5);function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var a=function(){function t(){u(this,t)}return i(t,[{key:"setup",value:function(t){return new r.SalteAuth(t)}},{key:"$get",value:function(t,e,n){return function(){function e(){u(this,e)}return i(e,null,[{key:"digest",value:function(e){return e.then((function(e){return t.$digest(),e})).catch((function(e){throw t.$digest(),e}))}},{key:"on",value:function(t,e){this.$listeners[t]||(this.$listeners[t]=[]),this.$listeners[t].push(e)}},{key:"off",value:function(t,e){var n=this.$listeners[t].indexOf(e);this.$listeners[t].splice(n,1)}},{key:"loginWithRedirect",value:function(){var t;return(t=this.$auth).loginWithRedirect.apply(t,arguments)}},{key:"loginWithIframe",value:function(){var t;return(t=this.$auth).loginWithIframe.apply(t,arguments)}},{key:"loginWithPopup",value:function(){var t;return(t=this.$auth).loginWithPopup.apply(t,arguments)}},{key:"logoutWithRedirect",value:function(){var t;return(t=this.$auth).logoutWithRedirect.apply(t,arguments)}},{key:"logoutWithIframe",value:function(){var t;return(t=this.$auth).logoutWithIframe.apply(t,arguments)}},{key:"logoutWithPopup",value:function(){var t;return(t=this.$auth).logoutWithPopup.apply(t,arguments)}},{key:"retrieveAccessToken",value:function(){return this.$auth.retrieveAccessToken()}},{key:"profile",get:function(){return this.$auth.profile}},{key:"$auth",get:function(){return window.salte&&window.salte.auth?window.salte.auth:null}},{key:"$listeners",get:function(){return this.$$listeners||(this.$$listeners={}),this.$$listeners}},{key:"$$onStorageChanged",value:function(e){e.storageArea.length&&-1===e.key.indexOf("salte.auth")||t.$digest()}},{key:"$$registerRoutes",value:function(){-1===[!1,!0].indexOf(this.$auth.$config.routes)&&(this.$auth.$config.routes=this.$auth.$config.routes||[],this.$auth.$config.routes=this.$auth.$config.routes.concat(n.uirouter),this.$auth.$config.routes=this.$auth.$config.routes.concat(n.ngroute))}},{key:"$$registerEvents",value:function(){for(var e=this,n=["login","logout","refresh"],r=function(r){var u=n[r];e.$auth.on(u,(function(n,r){var o=e.$listeners[u];if(o)for(var i=0;i<o.length;i++)o[i](n,r);t.$digest()}))},u=0;u<n.length;u++)r(u)}}]),e}()}}]),t}();a.prototype.$get.$inject=["$rootScope","$q","SalteAuthRoutesService"]},function(t){t.exports=e}],r={};function u(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={exports:{}};return n[t](o,o.exports,u),o.exports}u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,{a:e}),e},u.d=function(t,e){for(var n in e)u.o(e,n)&&!u.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return function(){u.r(o);var t=u(1),e=u.n(t),n=u(2),r=u(4),i=e().module("salte.auth",[n.default]);i.provider("SalteAuthService",r.default),i.run(["SalteAuthService",function(t){window.addEventListener("storage",t.$$onStorageChanged),t.$$registerRoutes(),t.$$registerEvents()}]),o.default=i.name}(),o}()}));
//# sourceMappingURL=salte-auth-angularjs.min.js.map